<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>Log Detail</title>

<style>
/* ================= 全域（與主頁一致） ================= */
body{
    margin:0;
    font-family:"Segoe UI","Microsoft JhengHei", Arial;
    background: radial-gradient(circle at top, #1c1f24, #0f1115);
    color:#e6e6e6;
}

/* ================= 主框 ================= */
.container{
    width:90%;
    max-width:1100px;
    margin:30px auto;
    background: linear-gradient(180deg, #1a1d22, #121417);
    border:1px solid #3a3f46;
    padding:25px;
    box-sizing:border-box;
}

/* ================= 標題 ================= */
h2{
    margin:0 0 20px 0;
    text-align:center;
    color:#4fd18b;
    font-size:32px;
}

/* ================= 欄位 ================= */
label{
    display:block;
    margin-top:15px;
    margin-bottom:6px;
    font-size:18px;
    color:#ffb347;
}

textarea{
    width:100%;
    height:280px;
    font-size:20px;
    padding:10px;
    box-sizing:border-box;
    border:1px solid #ff6a00;
    background:#0f1115;
    color:#4aa3ff;
    resize:vertical;
}

/* ================= Button ================= */
.button-bar{
    margin-top:20px;
    text-align:right;
}

.btn{
    border:1px solid #6a6f78;
    background: linear-gradient(#2a2f36, #1a1e24);
    font-size:22px;
    font-weight:bold;
    padding:6px 24px;
    cursor:pointer;
    margin-left:10px;
}

.btn-blue{ color:#4aa3ff; }
.btn-orange{ color:#ff9f1a; }
.btn-red{ color:#ff4c4c; }

.btn:hover{
    background:#343a45;
}
</style>
</head>

<body>

<div class="container">

    <h2>Log Detail</h2>

    <label>Process Describe</label>
    <textarea id="process" readonly></textarea>

    <div class="button-bar">
        <button class="btn btn-orange" onclick="enableEdit()">Edit</button>
        <button class="btn btn-blue" onclick="save()">Save</button>
        <button class="btn btn-red" onclick="window.close()">Exit</button>
    </div>

</div>

<script>
/* ===== 讀取 Log ===== */
const id = new URLSearchParams(location.search).get('logId');
const logs = JSON.parse(localStorage.getItem('EventLogList') || '[]');
const log = logs.find(l => l.logId === id);

if(!log){
    alert('Log not found');
} else {
    process.value = log.process || '';
}

/* ===== Edit ===== */
function enableEdit(){
    process.removeAttribute('readonly');
    process.focus();
}

/* ===== Save ===== */
function save(){
    if(!log) return;

    log.process = process.value;
    localStorage.setItem('EventLogList', JSON.stringify(logs));
    alert('Saved');
}
</script>

</body>
</html>
